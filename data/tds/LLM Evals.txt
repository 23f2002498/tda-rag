<article class="markdown-section" id="main"><h2 id="llm-evaluations-with-promptfoo"><a class="anchor" data-id="llm-evaluations-with-promptfoo" href="#/llm-evals?id=llm-evaluations-with-promptfoo"><span>LLM Evaluations with PromptFoo</span></a></h2><p>Test-drive your prompts and models with automated, reliable evaluations.</p><p><a href="https://youtu.be/KhINc5XwhKs" rel="noopener" target="_blank"><img alt="ðŸš€ Test Driven Prompt Engineering with PromptFoo (12 min)" data-origin="https://i.ytimg.com/vi_webp/KhINc5XwhKs/sddefault.webp" src="https://i.ytimg.com/vi_webp/KhINc5XwhKs/sddefault.webp"/></a></p><p>PromptFoo is a test-driven development framework for LLMs:</p><ul><li><strong>Developer-first</strong>: Fast CLI with live reload &amp; caching (<a href="https://promptfoo.dev" rel="noopener" target="_blank">promptfoo.dev</a>)</li><li><strong>Multi-provider</strong>: Works with OpenAI, Anthropic, HuggingFace, Ollama &amp; more (<a href="https://github.com/promptfoo/promptfoo" rel="noopener" target="_blank">GitHub</a>)</li><li><strong>Assertions</strong>: Builtâ€‘in (<code>contains</code>, <code>equals</code>) &amp; modelâ€‘graded (<code>llm-rubric</code>) (<a href="https://www.promptfoo.dev/docs/configuration/expected-outputs/" rel="noopener" target="_blank">docs</a>)</li><li><strong>CI/CD</strong>: Integrate evals into pipelines for regression safety (<a href="https://www.promptfoo.dev/docs/integrations/ci-cd/" rel="noopener" target="_blank">CI/CD guide</a>)</li></ul><p>To run PromptFoo:</p><ol><li>Install Node.js &amp; npm (<a href="https://nodejs.org/" rel="noopener" target="_blank">nodejs.org</a>)</li><li>Set up your <a href="https://platform.openai.com/api-keys" rel="noopener" target="_blank"><code>OPENAI_API_KEY</code></a> environment variable</li><li>Configure <code>promptfooconfig.yaml</code>. Below is an example:</li></ol><pre class="language-yaml" data-lang="yaml" v-pre=""><code class="lang-yaml language-yaml"><span class="token key atrule">prompts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">|</span><span class="token scalar string">
    Summarize this text: "{{text}}"</span>
  <span class="token punctuation">-</span> <span class="token punctuation">|</span><span class="token scalar string">
    Please write a concise summary of: "{{text}}"</span>

<span class="token key atrule">providers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> openai<span class="token punctuation">:</span>gpt<span class="token punctuation">-</span>3.5<span class="token punctuation">-</span>turbo
  <span class="token punctuation">-</span> openai<span class="token punctuation">:</span>gpt<span class="token punctuation">-</span><span class="token number">4</span>

<span class="token key atrule">tests</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> summary_test
    <span class="token key atrule">vars</span><span class="token punctuation">:</span>
      <span class="token key atrule">text</span><span class="token punctuation">:</span> <span class="token string">"PromptFoo is an open-source CLI and library for evaluating and testing LLMs with assertions, caching, and matrices."</span>
    <span class="token key atrule">assertions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">contains-all</span><span class="token punctuation">:</span>
          <span class="token key atrule">values</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">"open-source"</span>
            <span class="token punctuation">-</span> <span class="token string">"LLMs"</span>
      <span class="token punctuation">-</span> <span class="token key atrule">llm-rubric</span><span class="token punctuation">:</span>
          <span class="token key atrule">instruction</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            Score the summary from 1 to 5 for:
            - relevance: captures the main info?
            - clarity: wording is clear and concise?</span>
          <span class="token key atrule">schema</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> object
            <span class="token key atrule">properties</span><span class="token punctuation">:</span>
              <span class="token key atrule">relevance</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> number
                <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
                <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">5</span>
              <span class="token key atrule">clarity</span><span class="token punctuation">:</span>
                <span class="token key atrule">type</span><span class="token punctuation">:</span> number
                <span class="token key atrule">minimum</span><span class="token punctuation">:</span> <span class="token number">1</span>
                <span class="token key atrule">maximum</span><span class="token punctuation">:</span> <span class="token number">5</span>
            <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>relevance<span class="token punctuation">,</span> clarity<span class="token punctuation">]</span>
            <span class="token key atrule">additionalProperties</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token key atrule">commandLineOptions</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Now, you can run the evaluations and see the results.</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Execute all tests</span>
npx <span class="token parameter variable">-y</span> promptfoo <span class="token builtin class-name">eval</span> <span class="token parameter variable">-c</span> promptfooconfig.yaml

<span class="token comment"># List past evaluations</span>
npx <span class="token parameter variable">-y</span> promptfoo list evals

<span class="token comment"># Launch interactive results viewer on port 8080</span>
npx <span class="token parameter variable">-y</span> promptfoo view <span class="token parameter variable">-p</span> <span class="token number">8080</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>PromptFoo caches API responses by default (TTL 14 days). You can disable it with <code>--no-cache</code> or clear it.</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Disable cache for this run</span>
<span class="token builtin class-name">echo</span> y <span class="token operator">|</span> promptfoo <span class="token builtin class-name">eval</span> --no-cache <span class="token parameter variable">-c</span> promptfooconfig.yaml

<span class="token comment"># Clear all cache</span>
<span class="token builtin class-name">echo</span> y <span class="token operator">|</span> promptfoo cache <span class="token function">clear</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><div class="docsify-pagination-container">
<div class="pagination-item pagination-item--previous">
<a href="#/llm-speech">
<div class="pagination-item-label">
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="8,2 2,8 8,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
<span>Previous</span>
</div>
<div class="pagination-item-title">LLM Speech</div>
<div class="pagination-item-subtitle"></div></a>
</div>
<div class="pagination-item pagination-item--next">
<a href="#/project-tds-virtual-ta">
<div class="pagination-item-label">
<span>Next</span>
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="2,2 8,8 2,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
</div>
<div class="pagination-item-title">Project 1</div>
<div class="pagination-item-subtitle"></div></a>
</div>
</div></article>