<article class="markdown-section" id="main"><h2 id="llm-text-extraction"><a class="anchor" data-id="llm-text-extraction" href="#/llm-text-extraction?id=llm-text-extraction"><span>LLM Text Extraction</span></a></h2><p><a href="#/json">JSON</a> is one of the most widely used formats in the world for applications to exchange data.</p><p><a href="https://youtu.be/72514uGffPE" rel="noopener" target="_blank"><img alt="LLM Extraction" data-origin="https://i.ytimg.com/vi_webp/72514uGffPE/sddefault.webp" src="https://i.ytimg.com/vi_webp/72514uGffPE/sddefault.webp"/></a></p><p>This video explains how to use LLMs to extract structure from unstructured data, covering:</p><ul><li><strong>LLM for Data Extraction</strong>: Use OpenAI’s API to extract structured information from unstructured data like addresses.</li><li><strong>JSON Schema</strong>: Define a JSON schema to ensure consistent and structured output from the LLM.</li><li><strong>Prompt Engineering</strong>: Craft effective prompts to guide the LLM’s response and improve accuracy.</li><li><strong>Data Cleaning</strong>: Use string functions and OpenAI’s API to clean and standardize data.</li><li><strong>Data Analysis</strong>: Analyze extracted data using Pandas to gain insights.</li><li><strong>LLM Limitations</strong>: Understand the limitations of LLMs, including potential errors and inconsistencies in output.</li><li><strong>Production Use Cases</strong>: Explore real-world applications of LLMs for data extraction, such as customer service email analysis.</li></ul><p>Here are the links used in the video:</p><ul><li><a href="https://colab.research.google.com/drive/1Z8mG-RPTSYY4qwkoNdzRTc4StbnwOXeE" rel="noopener" target="_blank">Jupyter Notebook</a></li><li><a href="https://json-schema.org/" rel="noopener" target="_blank">JSON Schema</a></li><li><a href="https://platform.openai.com/docs/guides/function-calling" rel="noopener" target="_blank">Function calling</a></li></ul><p>Structured Outputs is a feature that ensures the model will always generate responses that adhere to your supplied
<a href="https://json-schema.org/overview/what-is-jsonschema" rel="noopener" target="_blank">JSON Schema</a>, so you don’t need to worry about the model omitting a required key,
or hallucinating an invalid enum value.</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token function">curl</span> https://api.openai.com/v1/chat/completions <span class="token punctuation">\</span>
<span class="token parameter variable">-H</span> <span class="token string">"Authorization: Bearer <span class="token variable">$OPENAI_API_KEY</span>"</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-H</span> <span class="token string">"Content-Type: application/json"</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-d</span> <span class="token string">'{
  "model": "gpt-4o-2024-08-06",
  "messages": [
    { "role": "system", "content": "You are a helpful math tutor. Guide the user through the solution step by step." },
    { "role": "user", "content": "how can I solve 8x + 7 = -23" }
  ],
  "response_format": {
    "type": "json_schema",
    "json_schema": {
      "name": "math_response",
      "strict": true
      "schema": {
        "type": "object",
        "properties": {
          "steps": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": { "explanation": { "type": "string" }, "output": { "type": "string" } },
              "required": ["explanation", "output"],
              "additionalProperties": false
            }
          },
          "final_answer": { "type": "string" }
        },
        "required": ["steps", "final_answer"],
        "additionalProperties": false
      }
    }
  }
}'</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Here’s what the <code>response_format</code> tells OpenAI. The items marked ⚠️ are OpenAI specific requirements for the JSON schema.</p><ul><li><code>"type": "json_schema"</code>: We want you to generate a JSON response that follows this schema.</li><li><code>"json_schema":</code>: We’re going to give you a schema.<ul><li><code>"name": "math_response"</code>: The schema is called <code>math_response</code>. (We can call it anything.)</li><li><code>"strict": true</code>: Follow the schema exactly.</li><li><code>"schema":</code>: Now, here’s the actual JSON schema.<ul><li><code>"type": "object"</code>: Return an object. ⚠️ The root object <strong>must</strong> be an object.</li><li><code>"properties":</code>: The object has these properties:<ul><li><code>"steps":</code>: There’s a <code>steps</code> property.<ul><li><code>"type": "array"</code>: It’s an array.</li><li><code>"items":</code>: Each item in the array…<ul><li><code>"type": "object"</code>: … is an object.</li><li><code>"properties":</code>: The object has these properties:<ul><li><code>"explanation":</code>: There’s an <code>explanation</code> property.<ul><li><code>"type": "string"</code>: … which is a string.</li></ul></li><li><code>"output":</code>: There’s an <code>output</code> property.<ul><li><code>"type": "string"</code>: … which is a string, too.</li></ul></li></ul></li><li><code>"required": ["explanation", "output"]</code>: ⚠️ You <strong>must</strong> add <code>"required": [...]</code> and include <strong>all</strong> fields int he object.</li><li><code>"additionalProperties": false</code>: ⚠️ OpenAI requires every object to have <code>"additionalProperties": false</code>.</li></ul></li></ul></li><li><code>"final_answer":</code>: There’s a <code>final_answer</code> property.<ul><li><code>"type": "string"</code>: … which is a string.</li></ul></li></ul></li><li><code>"required": ["steps", "final_answer"]</code>: ⚠️ You <strong>must</strong> add <code>"required": [...]</code> and include <strong>all</strong> fields in the object.</li><li><code>"additionalProperties": false</code>: ⚠️ OpenAI requires every object to have <code>"additionalProperties": false</code>.</li></ul></li></ul></li></ul><div class="docsify-pagination-container">
<div class="pagination-item pagination-item--previous">
<a href="#/llm-sentiment-analysis">
<div class="pagination-item-label">
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="8,2 2,8 8,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
<span>Previous</span>
</div>
<div class="pagination-item-title">LLM Sentiment Analysis</div>
<div class="pagination-item-subtitle"></div></a>
</div>
<div class="pagination-item pagination-item--next">
<a href="#/base64-encoding">
<div class="pagination-item-label">
<span>Next</span>
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="2,2 8,8 2,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
</div>
<div class="pagination-item-title">Base 64 Encoding</div>
<div class="pagination-item-subtitle"></div></a>
</div>
</div></article>