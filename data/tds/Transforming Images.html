<article class="markdown-section" id="main"><h2 id="transforming-images"><a class="anchor" data-id="transforming-images" href="#/transforming-images?id=transforming-images"><span>Transforming Images</span></a></h2><h3 id="image-processing-with-pil-pillow"><a class="anchor" data-id="image-processing-with-pil-pillow" href="#/transforming-images?id=image-processing-with-pil-pillow"><span>Image Processing with PIL (Pillow)</span></a></h3><p><a href="https://youtu.be/6Qs3wObeWwc" rel="noopener" target="_blank"><img alt="Python Tutorial: Image Manipulation with Pillow (16 min)" data-origin="https://i.ytimg.com/vi_webp/6Qs3wObeWwc/sddefault.webp" src="https://i.ytimg.com/vi_webp/6Qs3wObeWwc/sddefault.webp"/></a></p><p><a href="https://python-pillow.org/" rel="noopener" target="_blank">Pillow</a> is Python’s leading library for image processing, offering powerful tools for editing, analyzing, and generating images. It handles various formats (PNG, JPEG, GIF, etc.) and provides operations from basic resizing to complex filters.</p><p>Here’s a minimal example showing common operations:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token comment"># /// script</span>
<span class="token comment"># requires-python = "&gt;=3.11"</span>
<span class="token comment"># dependencies = ["Pillow"]</span>
<span class="token comment"># ///</span>

<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token punctuation">,</span> ImageEnhance<span class="token punctuation">,</span> ImageFilter

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">process_image</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Process an image with basic enhancements."""</span>
    <span class="token keyword">with</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token keyword">as</span> img<span class="token punctuation">:</span>
        <span class="token comment"># Convert to RGB to ensure compatibility</span>
        img <span class="token operator">=</span> img<span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">)</span>

        <span class="token comment"># Resize maintaining aspect ratio</span>
        img<span class="token punctuation">.</span>thumbnail<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># Apply enhancements</span>
        img <span class="token operator">=</span> <span class="token punctuation">(</span>ImageEnhance<span class="token punctuation">.</span>Contrast<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
               <span class="token punctuation">.</span>enhance<span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> img<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>ImageFilter<span class="token punctuation">.</span>SHARPEN<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> asyncio
    img <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>process_image<span class="token punctuation">(</span><span class="token string">"input.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    img<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">"output.jpg"</span><span class="token punctuation">,</span> quality<span class="token operator">=</span><span class="token number">85</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Key features and techniques you’ll learn:</p><ul><li><strong>Image Loading and Saving</strong>: Handle various formats with automatic conversion</li><li><strong>Basic Operations</strong>: Resize, rotate, crop, and flip images</li><li><strong>Color Manipulation</strong>: Adjust brightness, contrast, and color balance</li><li><strong>Filters and Effects</strong>: Apply blur, sharpen, and other visual effects</li><li><strong>Drawing</strong>: Add text, shapes, and overlays to images</li><li><strong>Batch Processing</strong>: Handle multiple images efficiently</li><li><strong>Memory Management</strong>: Process large images without memory issues</li></ul><h3 id="basic-image-operations"><a class="anchor" data-id="basic-image-operations" href="#/transforming-images?id=basic-image-operations"><span>Basic Image Operations</span></a></h3><p>Common operations for resizing, cropping, and rotating images:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">transform_image</span><span class="token punctuation">(</span>
    path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
    size<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    rotation<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Transform image with basic operations."""</span>
    <span class="token keyword">with</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token keyword">as</span> img<span class="token punctuation">:</span>
        <span class="token comment"># Resize with anti-aliasing</span>
        img <span class="token operator">=</span> img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>size<span class="token punctuation">,</span> Image<span class="token punctuation">.</span>LANCZOS<span class="token punctuation">)</span>

        <span class="token comment"># Rotate around center</span>
        <span class="token keyword">if</span> rotation<span class="token punctuation">:</span>
            img <span class="token operator">=</span> img<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>rotation<span class="token punctuation">,</span> expand<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment"># Auto-crop empty edges</span>
        img <span class="token operator">=</span> img<span class="token punctuation">.</span>crop<span class="token punctuation">(</span>img<span class="token punctuation">.</span>getbbox<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> img</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><h3 id="color-and-enhancement"><a class="anchor" data-id="color-and-enhancement" href="#/transforming-images?id=color-and-enhancement"><span>Color and Enhancement</span></a></h3><p>Adjust image appearance with built-in enhancement tools:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> ImageEnhance<span class="token punctuation">,</span> ImageOps

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">enhance_image</span><span class="token punctuation">(</span>
    img<span class="token punctuation">:</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">,</span>
    brightness<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    contrast<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
    saturation<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">1.0</span>
<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Apply color enhancements to image."""</span>
    enhancers <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span>ImageEnhance<span class="token punctuation">.</span>Brightness<span class="token punctuation">,</span> brightness<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>ImageEnhance<span class="token punctuation">.</span>Contrast<span class="token punctuation">,</span> contrast<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>ImageEnhance<span class="token punctuation">.</span>Color<span class="token punctuation">,</span> saturation<span class="token punctuation">)</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">for</span> Enhancer<span class="token punctuation">,</span> factor <span class="token keyword">in</span> enhancers<span class="token punctuation">:</span>
        <span class="token keyword">if</span> factor <span class="token operator">!=</span> <span class="token number">1.0</span><span class="token punctuation">:</span>
            img <span class="token operator">=</span> Enhancer<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">.</span>enhance<span class="token punctuation">(</span>factor<span class="token punctuation">)</span>

    <span class="token keyword">return</span> img</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><h3 id="filters-and-effects"><a class="anchor" data-id="filters-and-effects" href="#/transforming-images?id=filters-and-effects"><span>Filters and Effects</span></a></h3><p>Apply visual effects and filters to images:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> ImageFilter

<span class="token keyword">def</span> <span class="token function">apply_effects</span><span class="token punctuation">(</span>img<span class="token punctuation">:</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Apply various filters and effects."""</span>
    effects <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'blur'</span><span class="token punctuation">:</span> ImageFilter<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>radius<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'sharpen'</span><span class="token punctuation">:</span> ImageFilter<span class="token punctuation">.</span>SHARPEN<span class="token punctuation">,</span>
        <span class="token string">'edge'</span><span class="token punctuation">:</span> ImageFilter<span class="token punctuation">.</span>FIND_EDGES<span class="token punctuation">,</span>
        <span class="token string">'emboss'</span><span class="token punctuation">:</span> ImageFilter<span class="token punctuation">.</span>EMBOSS
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> img<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>effect<span class="token punctuation">)</span>
            <span class="token keyword">for</span> name<span class="token punctuation">,</span> effect <span class="token keyword">in</span> effects<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><h3 id="drawing-and-text"><a class="anchor" data-id="drawing-and-text" href="#/transforming-images?id=drawing-and-text"><span>Drawing and Text</span></a></h3><p>Add text, shapes, and overlays to images:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token punctuation">,</span> ImageDraw<span class="token punctuation">,</span> ImageFont

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">add_watermark</span><span class="token punctuation">(</span>
    img<span class="token punctuation">:</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
    font_size<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">30</span>
<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Image<span class="token punctuation">.</span>Image<span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Add text watermark to image."""</span>
    draw <span class="token operator">=</span> ImageDraw<span class="token punctuation">.</span>Draw<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    font <span class="token operator">=</span> ImageFont<span class="token punctuation">.</span>truetype<span class="token punctuation">(</span><span class="token string">"arial.ttf"</span><span class="token punctuation">,</span> font_size<span class="token punctuation">)</span>

    <span class="token comment"># Calculate text size and position</span>
    text_bbox <span class="token operator">=</span> draw<span class="token punctuation">.</span>textbbox<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> font<span class="token operator">=</span>font<span class="token punctuation">)</span>
    text_width <span class="token operator">=</span> text_bbox<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> text_bbox<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    text_height <span class="token operator">=</span> text_bbox<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> text_bbox<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

    <span class="token comment"># Position text at bottom-right</span>
    x <span class="token operator">=</span> img<span class="token punctuation">.</span>width <span class="token operator">-</span> text_width <span class="token operator">-</span> <span class="token number">10</span>
    y <span class="token operator">=</span> img<span class="token punctuation">.</span>height <span class="token operator">-</span> text_height <span class="token operator">-</span> <span class="token number">10</span>

    <span class="token comment"># Add text with shadow</span>
    draw<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span> y<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> font<span class="token operator">=</span>font<span class="token punctuation">,</span> fill<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span>
    draw<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> font<span class="token operator">=</span>font<span class="token punctuation">,</span> fill<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> img</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><h3 id="memory-efficient-processing"><a class="anchor" data-id="memory-efficient-processing" href="#/transforming-images?id=memory-efficient-processing"><span>Memory-Efficient Processing</span></a></h3><p>Handle large images without loading them entirely into memory:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> os

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">process_large_images</span><span class="token punctuation">(</span>
    input_dir<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
    output_dir<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>
    max_size<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Process multiple large images efficiently."""</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>output_dir<span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> filename <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>input_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> filename<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'.png'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>

        input_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>input_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span>
        output_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span>

        <span class="token keyword">with</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>input_path<span class="token punctuation">)</span> <span class="token keyword">as</span> img<span class="token punctuation">:</span>
            <span class="token comment"># Process in chunks using thumbnail</span>
            img<span class="token punctuation">.</span>thumbnail<span class="token punctuation">(</span>max_size<span class="token punctuation">)</span>
            img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>output_path<span class="token punctuation">,</span> optimize<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Practice with these resources:</p><ul><li><a href="https://pillow.readthedocs.io/" rel="noopener" target="_blank">Pillow Documentation</a>: Complete API reference</li><li><a href="https://realpython.com/image-processing-with-the-python-pillow-library/" rel="noopener" target="_blank">Python Image Processing Tutorial</a>: In-depth guide</li><li><a href="https://www.kaggle.com/datasets/lamsimon/celebs" rel="noopener" target="_blank">Sample Images Dataset</a>: Test images for practice</li></ul><p>Watch these tutorials for hands-on demonstrations:</p><p><a href="https://youtu.be/dkp4wUhCwR4" rel="noopener" target="_blank"><img alt="Image Processing Tutorial for beginners with Python PIL in 30 mins" data-origin="https://i.ytimg.com/vi_webp/dkp4wUhCwR4/sddefault.webp" src="https://i.ytimg.com/vi_webp/dkp4wUhCwR4/sddefault.webp"/></a></p><h3 id="image-processing-with-imagemagick"><a class="anchor" data-id="image-processing-with-imagemagick" href="#/transforming-images?id=image-processing-with-imagemagick"><span>Image Processing with ImageMagick</span></a></h3><p><a href="https://imagemagick.org/" rel="noopener" target="_blank">ImageMagick</a> is a powerful command-line tool for image manipulation, offering features beyond what’s possible with Python libraries. It’s particularly useful for:</p><ul><li>Batch processing large image collections</li><li>Complex image transformations</li><li>High-quality format conversion</li><li>Creating image thumbnails</li><li>Adding text and watermarks</li></ul><p>Basic Operations:</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Format conversion</span>
convert input.png output.jpg

<span class="token comment"># Resize image (maintains aspect ratio)</span>
convert input.jpg <span class="token parameter variable">-resize</span> 800x600 output.jpg

<span class="token comment"># Compress image quality</span>
convert input.jpg <span class="token parameter variable">-quality</span> <span class="token number">85</span> output.jpg

<span class="token comment"># Rotate image</span>
convert input.jpg <span class="token parameter variable">-rotate</span> <span class="token number">90</span> output.jpg</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Common Data Science Tasks:</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Create thumbnails for dataset preview</span>
convert input.jpg <span class="token parameter variable">-thumbnail</span> 200x200^ <span class="token parameter variable">-gravity</span> center <span class="token parameter variable">-extent</span> 200x200 thumb.jpg

<span class="token comment"># Normalize image for ML training</span>
convert input.jpg <span class="token parameter variable">-normalize</span> <span class="token parameter variable">-strip</span> output.jpg

<span class="token comment"># Extract dominant colors</span>
convert input.jpg <span class="token parameter variable">-colors</span> <span class="token number">5</span> -unique-colors txt:

<span class="token comment"># Generate image statistics</span>
identify <span class="token parameter variable">-verbose</span> input.jpg <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">"Mean|Standard|Kurtosis"</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Batch Processing:</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Convert all images in a directory</span>
mogrify <span class="token parameter variable">-format</span> jpg *.png

<span class="token comment"># Resize multiple images</span>
mogrify <span class="token parameter variable">-resize</span> 800x600 <span class="token parameter variable">-path</span> output/ *.jpg

<span class="token comment"># Add watermark to images</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">f</span> <span class="token keyword">in</span> *.jpg<span class="token punctuation">;</span> <span class="token keyword">do</span>
    convert <span class="token string">"<span class="token variable">$f</span>"</span> <span class="token parameter variable">-gravity</span> southeast <span class="token parameter variable">-draw</span> <span class="token string">"text 10,10 'Copyright'"</span> <span class="token string">"watermarked/<span class="token variable">$f</span>"</span>
<span class="token keyword">done</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Advanced Features:</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Apply image effects</span>
convert input.jpg <span class="token parameter variable">-blur</span> 0x3 blurred.jpg
convert input.jpg <span class="token parameter variable">-sharpen</span> 0x3 sharp.jpg
convert input.jpg <span class="token parameter variable">-edge</span> <span class="token number">1</span> edges.jpg

<span class="token comment"># Create image montage</span>
montage *.jpg <span class="token parameter variable">-geometry</span> 200x200+2+2 montage.jpg

<span class="token comment"># Extract image channels</span>
convert input.jpg <span class="token parameter variable">-separate</span> channels_%d.jpg

<span class="token comment"># Composite images</span>
composite overlay.png <span class="token parameter variable">-gravity</span> center base.jpg output.jpg</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Watch this ImageMagick tutorial (16 min):</p><p><a href="https://youtu.be/wjcBOoReYc0" rel="noopener" target="_blank"><img alt="ImageMagick Introduction (16 min)" data-origin="https://i.ytimg.com/vi_webp/wjcBOoReYc0/sddefault.webp" src="https://i.ytimg.com/vi_webp/wjcBOoReYc0/sddefault.webp"/></a></p><p>Tools:</p><ul><li><a href="http://www.fmwconcepts.com/imagemagick/" rel="noopener" target="_blank">Fred’s ImageMagick Scripts</a>: Useful script collection</li><li><a href="https://magickstudio.imagemagick.org/" rel="noopener" target="_blank">ImageMagick Online Studio</a>: Visual command builder</li></ul><p>Tips:</p><ol><li>Use <code>-strip</code> to remove metadata and reduce file size</li><li>Monitor memory usage with <code>-limit memory 1GB</code></li><li>Use <code>-define</code> for format-specific options</li><li>Process in parallel with <code>-parallel</code></li><li>Use <code>-monitor</code> to track progress</li></ol><p>Error Handling:</p><pre class="language-bash" data-lang="bash" v-pre=""><code class="lang-bash language-bash"><span class="token comment"># Check image validity</span>
identify -regard-warnings input.jpg

<span class="token comment"># Get detailed error information</span>
convert input.jpg output.jpg <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> <span class="token string">"error"</span>

<span class="token comment"># Set resource limits</span>
convert <span class="token parameter variable">-limit</span> memory 1GB <span class="token parameter variable">-limit</span> map 2GB input.jpg output.jpg</code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>For Python integration:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token comment"># /// script</span>
<span class="token comment"># requires-python = "&gt;=3.9"</span>
<span class="token comment"># dependencies = ["Wand"]</span>
<span class="token comment"># ///</span>

<span class="token keyword">from</span> wand<span class="token punctuation">.</span>image <span class="token keyword">import</span> Image

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">process_image</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Process image with ImageMagick via Wand."""</span>
    <span class="token keyword">with</span> Image<span class="token punctuation">(</span>filename<span class="token operator">=</span>path<span class="token punctuation">)</span> <span class="token keyword">as</span> img<span class="token punctuation">:</span>
        <span class="token comment"># Basic operations</span>
        img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
        img<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># Apply effects</span>
        img<span class="token punctuation">.</span>sharpen<span class="token punctuation">(</span>radius<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> sigma<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>

        <span class="token comment"># Save with compression</span>
        img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token string">'output.jpg'</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Note: Always install ImageMagick before using the Wand Python binding.</p><div class="docsify-pagination-container">
<div class="pagination-item pagination-item--previous">
<a href="#/dbt">
<div class="pagination-item-label">
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="8,2 2,8 8,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
<span>Previous</span>
</div>
<div class="pagination-item-title">Data Transformation with dbt</div>
<div class="pagination-item-subtitle"></div></a>
</div>
<div class="pagination-item pagination-item--next">
<a href="#/extracting-audio-and-transcripts">
<div class="pagination-item-label">
<span>Next</span>
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="2,2 8,8 2,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
</div>
<div class="pagination-item-title">Extracting Audio and Transcripts</div>
<div class="pagination-item-subtitle"></div></a>
</div>
</div></article>