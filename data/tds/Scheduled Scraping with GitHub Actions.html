<article class="markdown-section" id="main"><h2 id="scheduled-scraping-with-github-actions"><a class="anchor" data-id="scheduled-scraping-with-github-actions" href="#/scheduled-scraping-with-github-actions?id=scheduled-scraping-with-github-actions"><span>Scheduled Scraping with GitHub Actions</span></a></h2><p>GitHub Actions provides an excellent platform for running web scrapers on a schedule. This tutorial shows how to automate data collection from websites using GitHub Actions workflows.</p><h3 id="key-concepts"><a class="anchor" data-id="key-concepts" href="#/scheduled-scraping-with-github-actions?id=key-concepts"><span>Key Concepts</span></a></h3><ul><li><strong>Scheduling</strong>: Use <a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule" rel="noopener" target="_blank">cron syntax</a> to run scrapers at specific times</li><li><strong>Dependencies</strong>: Install required packages like <code>httpx</code>, <code>lxml</code></li><li><strong>Data Storage</strong>: Save scraped data to files and commit back to the repository</li><li><strong>Error Handling</strong>: Implement robust error handling for network issues and HTML parsing</li><li><strong>Rate Limiting</strong>: Respect website terms of service and implement delays between requests</li></ul><p>Here’s a sample <code>scrape.py</code> that scrapes the IMDb Top 250 movies using httpx and lxml:</p><pre class="language-python" data-lang="python" v-pre=""><code class="lang-python language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> httpx
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token punctuation">,</span> UTC
<span class="token keyword">from</span> lxml <span class="token keyword">import</span> html
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List<span class="token punctuation">,</span> Dict


<span class="token keyword">def</span> <span class="token function">scrape_imdb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>Dict<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Scrape IMDb Top 250 movies using httpx and lxml.

    Returns:
        List of dictionaries containing movie title, year, and rating.
    """</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (compatible; IMDbBot/1.0)"</span><span class="token punctuation">}</span>
    response <span class="token operator">=</span> httpx<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"https://www.imdb.com/chart/top/"</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    response<span class="token punctuation">.</span>raise_for_status<span class="token punctuation">(</span><span class="token punctuation">)</span>

    tree <span class="token operator">=</span> html<span class="token punctuation">.</span>fromstring<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    movies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> item <span class="token keyword">in</span> tree<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".ipc-metadata-list-summary-item"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        title <span class="token operator">=</span> <span class="token punctuation">(</span>
            item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".ipc-title__text"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".ipc-title__text"</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token boolean">None</span>
        <span class="token punctuation">)</span>
        year <span class="token operator">=</span> <span class="token punctuation">(</span>
            item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".cli-title-metadata span"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".cli-title-metadata span"</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token boolean">None</span>
        <span class="token punctuation">)</span>
        rating <span class="token operator">=</span> <span class="token punctuation">(</span>
            item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".ipc-rating-star"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> item<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">".ipc-rating-star"</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token boolean">None</span>
        <span class="token punctuation">)</span>

        <span class="token keyword">if</span> title <span class="token keyword">and</span> year <span class="token keyword">and</span> rating<span class="token punctuation">:</span>
            movies<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span> <span class="token string">"year"</span><span class="token punctuation">:</span> year<span class="token punctuation">,</span> <span class="token string">"rating"</span><span class="token punctuation">:</span> rating<span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> movies


<span class="token comment"># Scrape data and save with timestamp</span>
now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span>UTC<span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'imdb-top250-</span><span class="token interpolation"><span class="token punctuation">{</span>now<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">.json'</span></span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"timestamp"</span><span class="token punctuation">:</span> now<span class="token punctuation">.</span>isoformat<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"movies"</span><span class="token punctuation">:</span> scrape_imdb<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><p>Here’s a sample <code>.github/workflows/imdb-top250.yml</code> that runs the scraper daily and saves the data:</p><pre class="language-yaml" data-lang="yaml" v-pre=""><code class="lang-yaml language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Scrape IMDb Top 250

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">schedule</span><span class="token punctuation">:</span>
    <span class="token comment"># Runs at 00:00 UTC every day</span>
    <span class="token punctuation">-</span> <span class="token key atrule">cron</span><span class="token punctuation">:</span> <span class="token string">"0 0 * * *"</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span> <span class="token comment"># Allow manual triggers</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">scrape-imdb</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">permissions</span><span class="token punctuation">:</span>
      <span class="token key atrule">contents</span><span class="token punctuation">:</span> write

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout repository
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install uv
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> astral<span class="token punctuation">-</span>sh/setup<span class="token punctuation">-</span>uv@v5

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run scraper
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span> <span class="token comment"># python</span>
          uv run <span class="token punctuation">-</span><span class="token punctuation">-</span>with httpx<span class="token punctuation">,</span>lxml<span class="token punctuation">,</span>cssselect python scrape.py

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Commit and push changes
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add *.json
          git commit -m "Update IMDb Top 250 data [skip ci]" || exit 0
          git push</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span aria-hidden="hidden" class="error">Error</span><span aria-hidden="hidden" class="success">Copied</span><span aria-live="polite"></span></button></pre><h3 id="best-practices"><a class="anchor" data-id="best-practices" href="#/scheduled-scraping-with-github-actions?id=best-practices"><span>Best Practices</span></a></h3><ol><li><strong>Cache Dependencies</strong>: Use GitHub’s caching to speed up package installation</li><li><strong>Handle Errors</strong>: Implement retries and error logging</li><li><strong>Rate Limiting</strong>: Add delays between requests to avoid overwhelming servers</li><li><strong>Data Validation</strong>: Verify scraped data structure before saving</li><li><strong>Monitoring</strong>: Set up notifications for workflow failures</li></ol><h3 id="tools-and-resources"><a class="anchor" data-id="tools-and-resources" href="#/scheduled-scraping-with-github-actions?id=tools-and-resources"><span>Tools and Resources</span></a></h3><ul><li><a href="https://www.python-httpx.org/" rel="noopener" target="_blank">httpx</a>: Async HTTP client</li><li><a href="https://github.com/marketplace?type=actions" rel="noopener" target="_blank">GitHub Actions Marketplace</a></li><li><a href="https://docs.github.com/en/actions" rel="noopener" target="_blank">GitHub Actions Documentation</a></li></ul><h3 id="video-tutorials"><a class="anchor" data-id="video-tutorials" href="#/scheduled-scraping-with-github-actions?id=video-tutorials"><span>Video Tutorials</span></a></h3><p><a href="https://youtu.be/eJG86J200nM" rel="noopener" target="_blank"><img alt="How to run Github Actions on a Schedule" data-origin="https://i.ytimg.com/vi_webp/eJG86J200nM/sddefault.webp" src="https://i.ytimg.com/vi_webp/eJG86J200nM/sddefault.webp"/></a></p><div class="docsify-pagination-container">
<div class="pagination-item pagination-item--previous">
<a href="#/web-automation-with-playwright">
<div class="pagination-item-label">
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="8,2 2,8 8,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
<span>Previous</span>
</div>
<div class="pagination-item-title">Web Automation with Playwright</div>
<div class="pagination-item-subtitle"></div></a>
</div>
<div class="pagination-item pagination-item--next">
<a href="#/scraping-emarketer">
<div class="pagination-item-label">
<span>Next</span>
<svg height="16" viewbox="0 0 10 16" width="10" xmlns="http://www.w3.org/2000/svg">
<polyline fill="none" points="2,2 8,8 2,14" vector-effect="non-scaling-stroke"></polyline>
</svg>
</div>
<div class="pagination-item-title">Scraping emarketer.com</div>
<div class="pagination-item-subtitle"></div></a>
</div>
</div></article>